# TinyDb v0.1.0

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

âš ï¸ **æ—©æœŸæµ‹è¯•ç‰ˆæœ¬è­¦å‘Š**
è¿™æ˜¯ä¸€ä¸ªæ—©æœŸæµ‹è¯•ç‰ˆæœ¬ï¼Œä¸å»ºè®®åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨ã€‚å¦‚æœè¦åœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ï¼Œè¯·è¿›è¡Œå……åˆ†çš„æµ‹è¯•ã€‚

## ä»€ä¹ˆæ˜¯ SimpleDBï¼Ÿ

SimpleDB æ˜¯ä¸€ä¸ªè½»é‡çº§çš„ã€AOTå…¼å®¹çš„å•æ–‡ä»¶NoSQLæ•°æ®åº“ï¼Œä¸“ä¸º.NETåº”ç”¨ç¨‹åºè®¾è®¡ã€‚

### ç‰ˆæœ¬çŠ¶æ€ï¼šv0.1.0
- âœ… **åŸºæœ¬CRUDæ“ä½œ**ï¼šåˆ›å»ºã€è¯»å–ã€æ›´æ–°ã€åˆ é™¤
- âœ… **AOTå…¼å®¹æ€§**ï¼š100%æµ‹è¯•é€šè¿‡ç‡ï¼ˆ430/430æµ‹è¯•ï¼‰
- âœ… **LINQæŸ¥è¯¢æ”¯æŒ**ï¼šåŸºæœ¬æŸ¥è¯¢åŠŸèƒ½
- âœ… **äº‹åŠ¡æ”¯æŒ**ï¼šACIDäº‹åŠ¡å’Œå›æ»šæœºåˆ¶
- âš ï¸ **åŠŸèƒ½é™åˆ¶**ï¼šæŸäº›é«˜çº§åŠŸèƒ½å¯èƒ½å°šæœªå®Œå–„

## çœŸå®æµ‹è¯•æ•°æ®

åŸºäºå®é™…è¿è¡Œç»“æœï¼š

### åŸºæœ¬æ“ä½œæ€§èƒ½
```
âœ… è‡ªåŠ¨åˆ›å»ºä¸»é”®ç´¢å¼•: pk__id on _id (Unique=True)
1. åˆ›å»ºäº§å“è®°å½•:
   âœ… æ’å…¥äº§å“: è¶…è–„ç¬”è®°æœ¬ (ID: d7c60169c13367a4f6d38271)
   âœ… æ’å…¥äº§å“: æ— çº¿é¼ æ ‡ (ID: d7c60169c13367a4f6d48271)

2. æŸ¥è¯¢äº§å“è®°å½•:
   ğŸ“Š æ€»äº§å“æ•°: 2
   ğŸ”Œ ç”µå­äº§å“æ•°: 2
   ğŸ’° é«˜ä»·äº§å“(>1000å…ƒ): 1

3. æ›´æ–°äº§å“è®°å½•:
   æ›´æ–°å‰: è¶…è–„ç¬”è®°æœ¬ - åº“å­˜: 50, ä»·æ ¼: 6999.99
   æ›´æ–°å: è¶…è–„ç¬”è®°æœ¬ - åº“å­˜: 45, ä»·æ ¼: 6499.99

4. åˆ é™¤äº§å“è®°å½•:
   ğŸ—‘ï¸ åˆ é™¤äº§å“: æ— çº¿é¼ æ ‡
   âœ… åˆ é™¤æˆåŠŸ
   ğŸ“Š å‰©ä½™äº§å“æ•°: 1

5. æ‰¹é‡æ“ä½œ:
   ğŸ“¦ æ‰¹é‡æ’å…¥ 3 ä¸ªäº§å“
   ğŸ“Š æœ€ç»ˆäº§å“æ€»æ•°: 4

æ•°æ®åº“ç»Ÿè®¡: Database[SimpleDb]: 2/1 pages, 1 collections, 32,768 bytes, HitRatio=0.0%
```

## å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…

```bash
dotnet add package SimpleDb --version 0.1.0
```

### 2. å®šä¹‰å®ä½“

```csharp
using SimpleDb.Attributes;
using SimpleDb.Bson;

[Entity("products")]
public class Product
{
    public ObjectId Id { get; set; } = ObjectId.NewObjectId();
    public string Name { get; set; } = string.Empty;
    public decimal Price { get; set; }
    public string Category { get; set; } = string.Empty;
    public int Stock { get; set; }
    public DateTime CreatedAt { get; set; } = DateTime.UtcNow;
}
```

### 3. åŸºæœ¬ä½¿ç”¨

```csharp
using SimpleDb.Core;
using SimpleDb.Collections;

// åˆ›å»ºæ•°æ®åº“
using var engine = new SimpleDbEngine("mydb.db");
var products = engine.GetCollection<Product>("products");

// æ’å…¥æ•°æ®
var product = new Product
{
    Name = "è¶…è–„ç¬”è®°æœ¬",
    Price = 6999.99m,
    Category = "ç”µå­äº§å“",
    Stock = 50
};

var id = products.Insert(product);
Console.WriteLine($"æ’å…¥äº§å“ID: {id}");

// æŸ¥è¯¢æ•°æ®
var allProducts = products.FindAll().ToList();
var expensiveProducts = products.Find(p => p.Price > 1000).ToList();

// æ›´æ–°æ•°æ®
var updateProduct = products.Find(p => p.Name == "è¶…è–„ç¬”è®°æœ¬").FirstOrDefault();
if (updateProduct != null)
{
    updateProduct.Stock = 45;
    products.Update(updateProduct);
}

// åˆ é™¤æ•°æ®
var deleteProduct = products.Find(p => p.Name == "æ— çº¿é¼ æ ‡").FirstOrDefault();
if (deleteProduct != null)
{
    products.Delete(deleteProduct.Id);
}
```

## è¿è¡Œæ¼”ç¤º

é¡¹ç›®åŒ…å«å®Œæ•´çš„æ¼”ç¤ºç¨‹åºï¼š

```bash
dotnet run --project SimpleDb.Demo
```

æ¼”ç¤ºç¨‹åºå°†å±•ç¤ºï¼š
- åŸºæœ¬CRUDæ“ä½œ
- çœŸå®çš„æ€§èƒ½æ•°æ®
- æ•°æ®åº“ç»Ÿè®¡ä¿¡æ¯

## æµ‹è¯•è¦†ç›–ç‡

- **æ€»æµ‹è¯•æ•°**: 430ä¸ªæµ‹è¯•
- **é€šè¿‡ç‡**: 100%ï¼ˆ430/430ï¼‰
- **AOTå…¼å®¹æ€§**: å®Œå…¨å…¼å®¹
- **æµ‹è¯•æ¡†æ¶**: TUnit

## å·²çŸ¥é™åˆ¶

### v0.1.0ç‰ˆæœ¬é™åˆ¶ï¼š
1. **å¤æ‚ç±»å‹åºåˆ—åŒ–**: æŸäº›å¤æ‚ç±»å‹ï¼ˆå¦‚List<string>ï¼‰å¯èƒ½å­˜åœ¨åºåˆ—åŒ–é—®é¢˜
2. **LINQæŸ¥è¯¢åŠŸèƒ½**: éƒ¨åˆ†é«˜çº§LINQæ“ä½œå°šæœªå®Œå…¨å®ç°
3. **å¹¶å‘æ§åˆ¶**: å¹¶å‘è®¿é—®æœºåˆ¶éœ€è¦è¿›ä¸€æ­¥å®Œå–„
4. **æ€§èƒ½ä¼˜åŒ–**: æŸ¥è¯¢æ€§èƒ½æœ‰å¾…ä¼˜åŒ–
5. **é”™è¯¯å¤„ç†**: é”™è¯¯å¤„ç†æœºåˆ¶éœ€è¦å®Œå–„

### ä¸æ¨èçš„åŠŸèƒ½ï¼š
- å¤æ‚åµŒå¥—å¯¹è±¡
- å¤§é‡å¹¶å‘å†™å…¥
- ç”Ÿäº§ç¯å¢ƒå…³é”®ä¸šåŠ¡
- è¶…å¤§æ•°æ®é›†ï¼ˆ>1GBï¼‰

## å¼€å‘çŠ¶æ€

è¿™æ˜¯ä¸€ä¸ª**æ—©æœŸæµ‹è¯•ç‰ˆæœ¬**ï¼Œä¸»è¦ç”¨äºï¼š
- éªŒè¯æ ¸å¿ƒåŠŸèƒ½å¯è¡Œæ€§
- æ”¶é›†ç”¨æˆ·åé¦ˆ
- æµ‹è¯•AOTå…¼å®¹æ€§
- æ¼”ç¤ºåŸºæœ¬ä½¿ç”¨æ–¹æ³•

## è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤Issueå’ŒPull Requestï¼

### å¼€å‘ç¯å¢ƒè¦æ±‚ï¼š
- .NET 9.0
- æ”¯æŒC#æœ€æ–°è¯­æ³•

### æµ‹è¯•ï¼š
```bash
dotnet test                    # è¿è¡Œæ‰€æœ‰æµ‹è¯•
dotnet test -c Release        # Releaseæ¨¡å¼æµ‹è¯•
dotnet publish -c Release -r linux-x64 --self-contained true -p:PublishAot=true  # AOTç¼–è¯‘æµ‹è¯•
```

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT è®¸å¯è¯](LICENSE)ã€‚

Â© 2024 TinyDb Contributors

### MIT è®¸å¯è¯æ‘˜è¦

âœ… **å•†ä¸šä½¿ç”¨** - æ‚¨å¯ä»¥å°†æ­¤è½¯ä»¶ç”¨äºå•†ä¸šç›®çš„
âœ… **ä¿®æ”¹** - æ‚¨å¯ä»¥ä¿®æ”¹æ­¤è½¯ä»¶
âœ… **åˆ†å‘** - æ‚¨å¯ä»¥åˆ†å‘æ­¤è½¯ä»¶
âœ… **ç§äººä½¿ç”¨** - æ‚¨å¯ä»¥ç§äººä½¿ç”¨æ­¤è½¯ä»¶
âœ… **Sublicensing** - æ‚¨å¯ä»¥å¯¹æ‚¨çš„ä¿®æ”¹è¿›è¡Œå­è®¸å¯

âš ï¸ **è´£ä»»** - è½¯ä»¶æŒ‰"åŸæ ·"æä¾›ï¼Œä¸æä¾›ä»»ä½•æ‹…ä¿
âš ï¸ **ç‰ˆæƒ** - å¿…é¡»åŒ…å«ç‰ˆæƒå£°æ˜å’Œè®¸å¯è¯æ–‡æœ¬

## è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·æäº¤GitHub Issueã€‚

---

**é‡è¦æé†’**: æœ¬ç‰ˆæœ¬ä¸ºæ—©æœŸæµ‹è¯•ç‰ˆæœ¬ï¼Œè¯·åœ¨å……åˆ†æµ‹è¯•åå†è€ƒè™‘ç”Ÿäº§ä½¿ç”¨ã€‚