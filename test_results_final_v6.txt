
████████╗██╗   ██╗███╗   ██╗██╗████████╗
╚══██╔══╝██║   ██║████╗  ██║██║╚══██╔══╝
   ██║   ██║   ██║██╔██╗ ██║██║   ██║
   ██║   ██║   ██║██║╚██╗██║██║   ██║
   ██║   ╚██████╔╝██║ ╚████║██║   ██║
   ╚═╝    ╚═════╝ ╚═╝  ╚═══╝╚═╝   ╚═╝

   TUnit v1.6.25.0 | 64-bit | Ubuntu 24.04.3 LTS | ubuntu.24.04-x64 | .NET 8.0.22 | Microsoft Testing Platform v2.0.2

   Engine Mode: SourceGenerated

[+6/x0/?0] TinyDb.Tests.dll (net8.0|x64) - 正在运行 4 测试 (3s)

[+263/x0/?0] TinyDb.Tests.dll (net8.0|x64) - 正在运行 7 测试 (6s)

失败 BTree_Should_Handle_3_Levels_Split_And_Merge (716ms)
  TUnit.Engine.Exceptions.TestFailedException: AssertionException: Expected to be 1
  but found 5
  
  at Assert.That(index.NodeCount).IsEqualTo(1)
失败 Insert_Many_Documents_Should_ReUse_Data_Pages (2s 104ms)
  TUnit.Engine.Exceptions.TestFailedException: ArgumentException: Content too large. Capacity: 4055, Required: 4059
    在 TinyDb.Storage.Page.SetContent(Byte[] content) 位于 /home/j4587698/RiderProjects/TinyDb/TinyDb/Storage/Page.cs:131
    在 TinyDb.Index.DiskBTreeNode.Save(PageManager pm) 位于 /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/DiskBTreeNode.cs:185
    在 TinyDb.Index.DiskBTree.InsertNonFull(DiskBTreeNode node, IndexKey key, BsonValue value) 位于 /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/DiskBTree.cs:130
    在 TinyDb.Index.DiskBTree.Insert(IndexKey key, BsonValue value) 位于 /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/DiskBTree.cs:113
    在 TinyDb.Index.BTreeIndex.Insert(IndexKey key, BsonValue documentId) 位于 /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/BTreeIndex.cs:91
    在 TinyDb.Index.IndexManager.InsertDocument(BsonDocument document, BsonValue documentId) 位于 /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/IndexManager.cs:145
    在 TinyDb.Core.TinyDbEngine.InsertPreparedDocument(String col, BsonDocument doc, BsonValue id, CollectionState st, IndexManager idx, Boolean u) 位于 /home/j4587698/RiderProjects/TinyDb/TinyDb/Core/TinyDbEngine.cs:474
    在 TinyDb.Core.TinyDbEngine.InsertDocument(String col, BsonDocument doc) 位于 /home/j4587698/RiderProjects/TinyDb/TinyDb/Core/TinyDbEngine.cs:299
    在 TinyDb.Collections.DocumentCollection`1.Insert(T entity) 位于 /home/j4587698/RiderProjects/TinyDb/TinyDb/Collections/DocumentCollection.cs:99
    在 TinyDb.Tests.Core.SimpleDatabaseTests.Insert_Many_Documents_Should_ReUse_Data_Pages() 位于 /home/j4587698/RiderProjects/TinyDb/TinyDb.Tests/Core/SimpleDatabaseTests.cs:174
[+527/x2/?0] TinyDb.Tests.dll (net8.0|x64) - 正在运行 8 测试 (9s)

[+812/x2/?0] TinyDb.Tests.dll (net8.0|x64) - 正在运行 3 测试 (12s)

失败 Execute_With_Large_Dataset_Should_Perform_Well (3s 297ms)
  TUnit.Engine.Exceptions.TestFailedException: ArgumentException: Content too large. Capacity: 8151, Required: 8155
    在 TinyDb.Storage.Page.SetContent(Byte[] content) 位于 /home/j4587698/RiderProjects/TinyDb/TinyDb/Storage/Page.cs:131
    在 TinyDb.Index.DiskBTreeNode.Save(PageManager pm) 位于 /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/DiskBTreeNode.cs:185
    在 TinyDb.Index.DiskBTree.InsertNonFull(DiskBTreeNode node, IndexKey key, BsonValue value) 位于 /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/DiskBTree.cs:130
    在 TinyDb.Index.DiskBTree.Insert(IndexKey key, BsonValue value) 位于 /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/DiskBTree.cs:113
    在 TinyDb.Index.BTreeIndex.Insert(IndexKey key, BsonValue documentId) 位于 /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/BTreeIndex.cs:91
    在 TinyDb.Index.IndexManager.InsertDocument(BsonDocument document, BsonValue documentId) 位于 /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/IndexManager.cs:145
    在 TinyDb.Core.TinyDbEngine.InsertPreparedDocument(String col, BsonDocument doc, BsonValue id, CollectionState st, IndexManager idx, Boolean u) 位于 /home/j4587698/RiderProjects/TinyDb/TinyDb/Core/TinyDbEngine.cs:474
    在 TinyDb.Core.TinyDbEngine.InsertDocument(String col, BsonDocument doc) 位于 /home/j4587698/RiderProjects/TinyDb/TinyDb/Core/TinyDbEngine.cs:299
    在 TinyDb.Collections.DocumentCollection`1.Insert(T entity) 位于 /home/j4587698/RiderProjects/TinyDb/TinyDb/Collections/DocumentCollection.cs:99
    在 TinyDb.Tests.Query.QueryExecutorTests.Execute_With_Large_Dataset_Should_Perform_Well() 位于 /home/j4587698/RiderProjects/TinyDb/TinyDb.Tests/Query/QueryExecutorTests.cs:274
[+813/x3/?0] TinyDb.Tests.dll (net8.0|x64) - Delete_Many_Items_Should_Trigger_Merge_And_Redistribute (15s)

[+813/x3/?0] TinyDb.Tests.dll (net8.0|x64) - Delete_Many_Items_Should_Trigger_Merge_And_Redistribute (18s)

[+815/x3/?0] TinyDb.Tests.dll (net8.0|x64) - ConcurrentInserts_ShouldBeThreadSafe (21s)

失败 ConcurrentInserts_ShouldBeThreadSafe (2s 365ms)
  TUnit.Engine.Exceptions.TestFailedException: AssertionException: Expected to be empty
  but collection contains items: [System.ArgumentException: Content too large. Capacity: 8151, Required: 8155
     at TinyDb.Storage.Page.SetContent(Byte[] content) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Storage/Page.cs:line 131
     at TinyDb.Index.DiskBTreeNode.Save(PageManager pm) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/DiskBTreeNode.cs:line 185
     at TinyDb.Index.DiskBTree.InsertNonFull(DiskBTreeNode node, IndexKey key, BsonValue value) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/DiskBTree.cs:line 130
     at TinyDb.Index.DiskBTree.Insert(IndexKey key, BsonValue value) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/DiskBTree.cs:line 113
     at TinyDb.Index.BTreeIndex.Insert(IndexKey key, BsonValue documentId) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/BTreeIndex.cs:line 91
     at TinyDb.Index.IndexManager.InsertDocument(BsonDocument document, BsonValue documentId) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/IndexManager.cs:line 145
     at TinyDb.Core.TinyDbEngine.InsertPreparedDocument(String col, BsonDocument doc, BsonValue id, CollectionState st, IndexManager idx, Boolean u) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Core/TinyDbEngine.cs:line 474
     at TinyDb.Core.TinyDbEngine.InsertDocument(String col, BsonDocument doc) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Core/TinyDbEngine.cs:line 299
     at TinyDb.Collections.DocumentCollection`1.Insert(T entity) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Collections/DocumentCollection.cs:line 99
     at TinyDb.Tests.Concurrency.ConcurrencyTests.<>c__DisplayClass4_1.<ConcurrentInserts_ShouldBeThreadSafe>b__1() in /home/j4587698/RiderProjects/TinyDb/TinyDb.Tests/Concurrency/ConcurrencyTests.cs:line 70, System.ArgumentException: Content too large. Capacity: 8151, Required: 8155
     at TinyDb.Storage.Page.SetContent(Byte[] content) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Storage/Page.cs:line 131
     at TinyDb.Index.DiskBTreeNode.Save(PageManager pm) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/DiskBTreeNode.cs:line 185
     at TinyDb.Index.DiskBTree.InsertNonFull(DiskBTreeNode node, IndexKey key, BsonValue value) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/DiskBTree.cs:line 130
     at TinyDb.Index.DiskBTree.Insert(IndexKey key, BsonValue value) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/DiskBTree.cs:line 113
     at TinyDb.Index.BTreeIndex.Insert(IndexKey key, BsonValue documentId) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/BTreeIndex.cs:line 91
     at TinyDb.Index.IndexManager.InsertDocument(BsonDocument document, BsonValue documentId) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/IndexManager.cs:line 145
     at TinyDb.Core.TinyDbEngine.InsertPreparedDocument(String col, BsonDocument doc, BsonValue id, CollectionState st, IndexManager idx, Boolean u) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Core/TinyDbEngine.cs:line 474
     at TinyDb.Core.TinyDbEngine.InsertDocument(String col, BsonDocument doc) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Core/TinyDbEngine.cs:line 299
     at TinyDb.Collections.DocumentCollection`1.Insert(T entity) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Collections/DocumentCollection.cs:line 99
     at TinyDb.Tests.Concurrency.ConcurrencyTests.<>c__DisplayClass4_1.<ConcurrentInserts_ShouldBeThreadSafe>b__1() in /home/j4587698/RiderProjects/TinyDb/TinyDb.Tests/Concurrency/ConcurrencyTests.cs:line 70, System.ArgumentException: Content too large. Capacity: 8151, Required: 8155
     at TinyDb.Storage.Page.SetContent(Byte[] content) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Storage/Page.cs:line 131
     at TinyDb.Index.DiskBTreeNode.Save(PageManager pm) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/DiskBTreeNode.cs:line 185
     at TinyDb.Index.DiskBTree.InsertNonFull(DiskBTreeNode node, IndexKey key, BsonValue value) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/DiskBTree.cs:line 130
     at TinyDb.Index.DiskBTree.Insert(IndexKey key, BsonValue value) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/DiskBTree.cs:line 113
     at TinyDb.Index.BTreeIndex.Insert(IndexKey key, BsonValue documentId) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/BTreeIndex.cs:line 91
     at TinyDb.Index.IndexManager.InsertDocument(BsonDocument document, BsonValue documentId) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/IndexManager.cs:line 145
     at TinyDb.Core.TinyDbEngine.InsertPreparedDocument(String col, BsonDocument doc, BsonValue id, CollectionState st, IndexManager idx, Boolean u) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Core/TinyDbEngine.cs:line 474
     at TinyDb.Core.TinyDbEngine.InsertDocument(String col, BsonDocument doc) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Core/TinyDbEngine.cs:line 299
     at TinyDb.Collections.DocumentCollection`1.Insert(T entity) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Collections/DocumentCollection.cs:line 99
     at TinyDb.Tests.Concurrency.ConcurrencyTests.<>c__DisplayClass4_1.<ConcurrentInserts_ShouldBeThreadSafe>b__1() in /home/j4587698/RiderProjects/TinyDb/TinyDb.Tests/Concurrency/ConcurrencyTests.cs:line 70, System.ArgumentException: Content too large. Capacity: 8151, Required: 8155
     at TinyDb.Storage.Page.SetContent(Byte[] content) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Storage/Page.cs:line 131
     at TinyDb.Index.DiskBTreeNode.Save(PageManager pm) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/DiskBTreeNode.cs:line 185
     at TinyDb.Index.DiskBTree.InsertNonFull(DiskBTreeNode node, IndexKey key, BsonValue value) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/DiskBTree.cs:line 130
     at TinyDb.Index.DiskBTree.Insert(IndexKey key, BsonValue value) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/DiskBTree.cs:line 113
     at TinyDb.Index.BTreeIndex.Insert(IndexKey key, BsonValue documentId) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/BTreeIndex.cs:line 91
     at TinyDb.Index.IndexManager.InsertDocument(BsonDocument document, BsonValue documentId) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/IndexManager.cs:line 145
     at TinyDb.Core.TinyDbEngine.InsertPreparedDocument(String col, BsonDocument doc, BsonValue id, CollectionState st, IndexManager idx, Boolean u) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Core/TinyDbEngine.cs:line 474
     at TinyDb.Core.TinyDbEngine.InsertDocument(String col, BsonDocument doc) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Core/TinyDbEngine.cs:line 299
     at TinyDb.Collections.DocumentCollection`1.Insert(T entity) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Collections/DocumentCollection.cs:line 99
     at TinyDb.Tests.Concurrency.ConcurrencyTests.<>c__DisplayClass4_1.<ConcurrentInserts_ShouldBeThreadSafe>b__1() in /home/j4587698/RiderProjects/TinyDb/TinyDb.Tests/Concurrency/ConcurrencyTests.cs:line 70, System.ArgumentException: Content too large. Capacity: 8151, Required: 8155
     at TinyDb.Storage.Page.SetContent(Byte[] content) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Storage/Page.cs:line 131
     at TinyDb.Index.DiskBTreeNode.Save(PageManager pm) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/DiskBTreeNode.cs:line 185
     at TinyDb.Index.DiskBTree.InsertNonFull(DiskBTreeNode node, IndexKey key, BsonValue value) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/DiskBTree.cs:line 130
     at TinyDb.Index.DiskBTree.Insert(IndexKey key, BsonValue value) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/DiskBTree.cs:line 113
     at TinyDb.Index.BTreeIndex.Insert(IndexKey key, BsonValue documentId) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/BTreeIndex.cs:line 91
     at TinyDb.Index.IndexManager.InsertDocument(BsonDocument document, BsonValue documentId) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/IndexManager.cs:line 145
     at TinyDb.Core.TinyDbEngine.InsertPreparedDocument(String col, BsonDocument doc, BsonValue id, CollectionState st, IndexManager idx, Boolean u) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Core/TinyDbEngine.cs:line 474
     at TinyDb.Core.TinyDbEngine.InsertDocument(String col, BsonDocument doc) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Core/TinyDbEngine.cs:line 299
     at TinyDb.Collections.DocumentCollection`1.Insert(T entity) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Collections/DocumentCollection.cs:line 99
     at TinyDb.Tests.Concurrency.ConcurrencyTests.<>c__DisplayClass4_1.<ConcurrentInserts_ShouldBeThreadSafe>b__1() in /home/j4587698/RiderProjects/TinyDb/TinyDb.Tests/Concurrency/ConcurrencyTests.cs:line 70, System.ArgumentException: Content too large. Capacity: 8151, Required: 8155
     at TinyDb.Storage.Page.SetContent(Byte[] content) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Storage/Page.cs:line 131
     at TinyDb.Index.DiskBTreeNode.Save(PageManager pm) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/DiskBTreeNode.cs:line 185
     at TinyDb.Index.DiskBTree.InsertNonFull(DiskBTreeNode node, IndexKey key, BsonValue value) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/DiskBTree.cs:line 130
     at TinyDb.Index.DiskBTree.Insert(IndexKey key, BsonValue value) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/DiskBTree.cs:line 113
     at TinyDb.Index.BTreeIndex.Insert(IndexKey key, BsonValue documentId) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/BTreeIndex.cs:line 91
     at TinyDb.Index.IndexManager.InsertDocument(BsonDocument document, BsonValue documentId) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/IndexManager.cs:line 145
     at TinyDb.Core.TinyDbEngine.InsertPreparedDocument(String col, BsonDocument doc, BsonValue id, CollectionState st, IndexManager idx, Boolean u) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Core/TinyDbEngine.cs:line 474
     at TinyDb.Core.TinyDbEngine.InsertDocument(String col, BsonDocument doc) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Core/TinyDbEngine.cs:line 299
     at TinyDb.Collections.DocumentCollection`1.Insert(T entity) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Collections/DocumentCollection.cs:line 99
     at TinyDb.Tests.Concurrency.ConcurrencyTests.<>c__DisplayClass4_1.<ConcurrentInserts_ShouldBeThreadSafe>b__1() in /home/j4587698/RiderProjects/TinyDb/TinyDb.Tests/Concurrency/ConcurrencyTests.cs:line 70, System.ArgumentException: Content too large. Capacity: 8151, Required: 8155
     at TinyDb.Storage.Page.SetContent(Byte[] content) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Storage/Page.cs:line 131
     at TinyDb.Index.DiskBTreeNode.Save(PageManager pm) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/DiskBTreeNode.cs:line 185
     at TinyDb.Index.DiskBTree.InsertNonFull(DiskBTreeNode node, IndexKey key, BsonValue value) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/DiskBTree.cs:line 130
     at TinyDb.Index.DiskBTree.Insert(IndexKey key, BsonValue value) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/DiskBTree.cs:line 113
     at TinyDb.Index.BTreeIndex.Insert(IndexKey key, BsonValue documentId) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/BTreeIndex.cs:line 91
     at TinyDb.Index.IndexManager.InsertDocument(BsonDocument document, BsonValue documentId) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/IndexManager.cs:line 145
     at TinyDb.Core.TinyDbEngine.InsertPreparedDocument(String col, BsonDocument doc, BsonValue id, CollectionState st, IndexManager idx, Boolean u) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Core/TinyDbEngine.cs:line 474
     at TinyDb.Core.TinyDbEngine.InsertDocument(String col, BsonDocument doc) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Core/TinyDbEngine.cs:line 299
     at TinyDb.Collections.DocumentCollection`1.Insert(T entity) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Collections/DocumentCollection.cs:line 99
     at TinyDb.Tests.Concurrency.ConcurrencyTests.<>c__DisplayClass4_1.<ConcurrentInserts_ShouldBeThreadSafe>b__1() in /home/j4587698/RiderProjects/TinyDb/TinyDb.Tests/Concurrency/ConcurrencyTests.cs:line 70, System.ArgumentException: Content too large. Capacity: 8151, Required: 8155
     at TinyDb.Storage.Page.SetContent(Byte[] content) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Storage/Page.cs:line 131
     at TinyDb.Index.DiskBTreeNode.Save(PageManager pm) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/DiskBTreeNode.cs:line 185
     at TinyDb.Index.DiskBTree.InsertNonFull(DiskBTreeNode node, IndexKey key, BsonValue value) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/DiskBTree.cs:line 130
     at TinyDb.Index.DiskBTree.Insert(IndexKey key, BsonValue value) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/DiskBTree.cs:line 113
     at TinyDb.Index.BTreeIndex.Insert(IndexKey key, BsonValue documentId) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/BTreeIndex.cs:line 91
     at TinyDb.Index.IndexManager.InsertDocument(BsonDocument document, BsonValue documentId) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/IndexManager.cs:line 145
     at TinyDb.Core.TinyDbEngine.InsertPreparedDocument(String col, BsonDocument doc, BsonValue id, CollectionState st, IndexManager idx, Boolean u) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Core/TinyDbEngine.cs:line 474
     at TinyDb.Core.TinyDbEngine.InsertDocument(String col, BsonDocument doc) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Core/TinyDbEngine.cs:line 299
     at TinyDb.Collections.DocumentCollection`1.Insert(T entity) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Collections/DocumentCollection.cs:line 99
     at TinyDb.Tests.Concurrency.ConcurrencyTests.<>c__DisplayClass4_1.<ConcurrentInserts_ShouldBeThreadSafe>b__1() in /home/j4587698/RiderProjects/TinyDb/TinyDb.Tests/Concurrency/ConcurrencyTests.cs:line 70, System.ArgumentException: Content too large. Capacity: 8151, Required: 8155
     at TinyDb.Storage.Page.SetContent(Byte[] content) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Storage/Page.cs:line 131
     at TinyDb.Index.DiskBTreeNode.Save(PageManager pm) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/DiskBTreeNode.cs:line 185
     at TinyDb.Index.DiskBTree.InsertNonFull(DiskBTreeNode node, IndexKey key, BsonValue value) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/DiskBTree.cs:line 130
     at TinyDb.Index.DiskBTree.Insert(IndexKey key, BsonValue value) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/DiskBTree.cs:line 113
     at TinyDb.Index.BTreeIndex.Insert(IndexKey key, BsonValue documentId) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/BTreeIndex.cs:line 91
     at TinyDb.Index.IndexManager.InsertDocument(BsonDocument document, BsonValue documentId) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/IndexManager.cs:line 145
     at TinyDb.Core.TinyDbEngine.InsertPreparedDocument(String col, BsonDocument doc, BsonValue id, CollectionState st, IndexManager idx, Boolean u) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Core/TinyDbEngine.cs:line 474
     at TinyDb.Core.TinyDbEngine.InsertDocument(String col, BsonDocument doc) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Core/TinyDbEngine.cs:line 299
     at TinyDb.Collections.DocumentCollection`1.Insert(T entity) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Collections/DocumentCollection.cs:line 99
     at TinyDb.Tests.Concurrency.ConcurrencyTests.<>c__DisplayClass4_1.<ConcurrentInserts_ShouldBeThreadSafe>b__1() in /home/j4587698/RiderProjects/TinyDb/TinyDb.Tests/Concurrency/ConcurrencyTests.cs:line 70, System.ArgumentException: Content too large. Capacity: 8151, Required: 8155
     at TinyDb.Storage.Page.SetContent(Byte[] content) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Storage/Page.cs:line 131
     at TinyDb.Index.DiskBTreeNode.Save(PageManager pm) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/DiskBTreeNode.cs:line 185
     at TinyDb.Index.DiskBTree.InsertNonFull(DiskBTreeNode node, IndexKey key, BsonValue value) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/DiskBTree.cs:line 130
     at TinyDb.Index.DiskBTree.Insert(IndexKey key, BsonValue value) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/DiskBTree.cs:line 113
     at TinyDb.Index.BTreeIndex.Insert(IndexKey key, BsonValue documentId) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/BTreeIndex.cs:line 91
     at TinyDb.Index.IndexManager.InsertDocument(BsonDocument document, BsonValue documentId) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/IndexManager.cs:line 145
     at TinyDb.Core.TinyDbEngine.InsertPreparedDocument(String col, BsonDocument doc, BsonValue id, CollectionState st, IndexManager idx, Boolean u) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Core/TinyDbEngine.cs:line 474
     at TinyDb.Core.TinyDbEngine.InsertDocument(String col, BsonDocument doc) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Core/TinyDbEngine.cs:line 299
     at TinyDb.Collections.DocumentCollection`1.Insert(T entity) in /home/j4587698/RiderProjects/TinyDb/TinyDb/Collections/DocumentCollection.cs:line 99
     at TinyDb.Tests.Concurrency.ConcurrencyTests.<>c__DisplayClass4_1.<ConcurrentInserts_ShouldBeThreadSafe>b__1() in /home/j4587698/RiderProjects/TinyDb/TinyDb.Tests/Concurrency/ConcurrencyTests.cs:line 70]
  
  at Assert.That(exceptions).IsEmpty()
[+819/x4/?0] TinyDb.Tests.dll (net8.0|x64) - Database_Should_Recover_From_Abnormal_Shutdown (24s)

失败 Database_Should_Recover_From_Abnormal_Shutdown (1s 622ms)
  TUnit.Engine.Exceptions.TestFailedException: ArgumentException: Content too large. Capacity: 8151, Required: 8155
    在 TinyDb.Storage.Page.SetContent(Byte[] content) 位于 /home/j4587698/RiderProjects/TinyDb/TinyDb/Storage/Page.cs:131
    在 TinyDb.Index.DiskBTreeNode.Save(PageManager pm) 位于 /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/DiskBTreeNode.cs:185
    在 TinyDb.Index.DiskBTree.InsertNonFull(DiskBTreeNode node, IndexKey key, BsonValue value) 位于 /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/DiskBTree.cs:130
    在 TinyDb.Index.DiskBTree.Insert(IndexKey key, BsonValue value) 位于 /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/DiskBTree.cs:113
    在 TinyDb.Index.BTreeIndex.Insert(IndexKey key, BsonValue documentId) 位于 /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/BTreeIndex.cs:91
    在 TinyDb.Index.IndexManager.InsertDocument(BsonDocument document, BsonValue documentId) 位于 /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/IndexManager.cs:145
    在 TinyDb.Core.TinyDbEngine.InsertPreparedDocument(String col, BsonDocument doc, BsonValue id, CollectionState st, IndexManager idx, Boolean u) 位于 /home/j4587698/RiderProjects/TinyDb/TinyDb/Core/TinyDbEngine.cs:474
    在 TinyDb.Core.TinyDbEngine.InsertDocument(String col, BsonDocument doc) 位于 /home/j4587698/RiderProjects/TinyDb/TinyDb/Core/TinyDbEngine.cs:299
    在 TinyDb.Collections.DocumentCollection`1.Insert(T entity) 位于 /home/j4587698/RiderProjects/TinyDb/TinyDb/Collections/DocumentCollection.cs:99
    在 TinyDb.Tests.Core.DatabaseRecoveryTests.Database_Should_Recover_From_Abnormal_Shutdown() 位于 /home/j4587698/RiderProjects/TinyDb/TinyDb.Tests/Core/DatabaseRecoveryTests.cs:43
[+829/x5/?0] TinyDb.Tests.dll (net8.0|x64) - Database_Should_Handle_Multiple_Page_Sizes (27s)

失败 HighConcurrency_Insert_StressTest (612ms)
  TUnit.Engine.Exceptions.TestFailedException: ArgumentException: Content too large. Capacity: 4055, Required: 4059
    在 TinyDb.Storage.Page.SetContent(Byte[] content) 位于 /home/j4587698/RiderProjects/TinyDb/TinyDb/Storage/Page.cs:131
    在 TinyDb.Index.DiskBTreeNode.Save(PageManager pm) 位于 /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/DiskBTreeNode.cs:185
    在 TinyDb.Index.DiskBTree.InsertNonFull(DiskBTreeNode node, IndexKey key, BsonValue value) 位于 /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/DiskBTree.cs:130
    在 TinyDb.Index.DiskBTree.Insert(IndexKey key, BsonValue value) 位于 /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/DiskBTree.cs:113
    在 TinyDb.Index.BTreeIndex.Insert(IndexKey key, BsonValue documentId) 位于 /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/BTreeIndex.cs:91
    在 TinyDb.Index.IndexManager.InsertDocument(BsonDocument document, BsonValue documentId) 位于 /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/IndexManager.cs:145
    在 TinyDb.Core.TinyDbEngine.InsertPreparedDocument(String col, BsonDocument doc, BsonValue id, CollectionState st, IndexManager idx, Boolean u) 位于 /home/j4587698/RiderProjects/TinyDb/TinyDb/Core/TinyDbEngine.cs:474
    在 TinyDb.Core.TinyDbEngine.InsertDocument(String col, BsonDocument doc) 位于 /home/j4587698/RiderProjects/TinyDb/TinyDb/Core/TinyDbEngine.cs:299
    在 TinyDb.Collections.DocumentCollection`1.Insert(T entity) 位于 /home/j4587698/RiderProjects/TinyDb/TinyDb/Collections/DocumentCollection.cs:99
    在 TinyDb.Tests.Core.StressTests.<>c__DisplayClass4_1.<HighConcurrency_Insert_StressTest>b__2() 位于 /home/j4587698/RiderProjects/TinyDb/TinyDb.Tests/Core/StressTests.cs:60
    在 System.Threading.ExecutionContext.RunFromThreadPoolDispatchLoop(Thread threadPoolThread, ExecutionContext executionContext, ContextCallback callback, Object state)
    --- End of stack trace from previous location ---
    在 System.Threading.ExecutionContext.RunFromThreadPoolDispatchLoop(Thread threadPoolThread, ExecutionContext executionContext, ContextCallback callback, Object state)
    在 System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
    --- End of stack trace from previous location ---
    在 TinyDb.Tests.Core.StressTests.HighConcurrency_Insert_StressTest() 位于 /home/j4587698/RiderProjects/TinyDb/TinyDb.Tests/Core/StressTests.cs:68
失败 Mixed_Load_StressTest (631ms)
  TUnit.Engine.Exceptions.TestFailedException: ArgumentException: Content too large. Capacity: 4055, Required: 4059
    在 TinyDb.Storage.Page.SetContent(Byte[] content) 位于 /home/j4587698/RiderProjects/TinyDb/TinyDb/Storage/Page.cs:131
    在 TinyDb.Index.DiskBTreeNode.Save(PageManager pm) 位于 /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/DiskBTreeNode.cs:185
    在 TinyDb.Index.DiskBTree.InsertNonFull(DiskBTreeNode node, IndexKey key, BsonValue value) 位于 /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/DiskBTree.cs:130
    在 TinyDb.Index.DiskBTree.Insert(IndexKey key, BsonValue value) 位于 /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/DiskBTree.cs:113
    在 TinyDb.Index.BTreeIndex.Insert(IndexKey key, BsonValue documentId) 位于 /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/BTreeIndex.cs:91
    在 TinyDb.Index.IndexManager.InsertDocument(BsonDocument document, BsonValue documentId) 位于 /home/j4587698/RiderProjects/TinyDb/TinyDb/Index/IndexManager.cs:145
    在 TinyDb.Core.TinyDbEngine.InsertPreparedDocument(String col, BsonDocument doc, BsonValue id, CollectionState st, IndexManager idx, Boolean u) 位于 /home/j4587698/RiderProjects/TinyDb/TinyDb/Core/TinyDbEngine.cs:474
    在 TinyDb.Core.TinyDbEngine.InsertDocument(String col, BsonDocument doc) 位于 /home/j4587698/RiderProjects/TinyDb/TinyDb/Core/TinyDbEngine.cs:299
    在 TinyDb.Collections.DocumentCollection`1.Insert(T entity) 位于 /home/j4587698/RiderProjects/TinyDb/TinyDb/Collections/DocumentCollection.cs:99
    在 TinyDb.Tests.Core.StressTests.Mixed_Load_StressTest() 位于 /home/j4587698/RiderProjects/TinyDb/TinyDb.Tests/Core/StressTests.cs:94
[+839/x7/?0] TinyDb.Tests.dll (net8.0|x64) - LongRunningTransaction_ShouldMaintainStability (30s)

失败 Delete_ShouldRefreshAllAncestorSeparators_ForDeepTrees (16ms)
  TUnit.Engine.Exceptions.TestFailedException: AssertionException: Expected to be 26
  but found 23
  
  at Assert.That(leafValues.First()).IsEqualTo(26)
失败 Delete_ShouldRefreshSeparators_AfterMergeAndBorrow (4ms)
  TUnit.Engine.Exceptions.TestFailedException: AssertionException: Expected to be 6
  but found 5
  
  at Assert.That(keys[i]).IsEqualTo(expected[i])
[+878/x9/?0] TinyDb.Tests.dll (net8.0|x64) - InventoryManagement_EndToEnd_Scenario (33s)

[+891/x9/?0] TinyDb.Tests.dll (net8.0|x64) - Query_WithIndexScan_ShouldWork (36s)

[+893/x9/?0] TinyDb.Tests.dll (net8.0|x64) - Query_StartsWith_ShouldWork (39s)

[+905/x9/?0] TinyDb.Tests.dll (net8.0|x64) - Where_With_Category_Filter_Should_Work (42s)


测试运行摘要: 失败! - /home/j4587698/RiderProjects/TinyDb/TinyDb.Tests/bin/Debug/net8.0/TinyDb.Tests.dll (net8.0|x64)
  总计: 960
  失败: 9
  成功: 951
  已跳过: 0
  持续时间: 43s 945ms
